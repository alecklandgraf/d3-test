<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Treemap</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <link type="text/css" rel="stylesheet" href="css/xcharts.css"/>
    <script type="text/javascript" src="js/d3.v2.js"></script>
    <script type="text/javascript" src="js/xcharts.js"></script>
    
    <script>
    $(document).ready(function () {
        var data = {
        "xScale": "ordinal",
        "yScale": "linear",
        "main": [
          {
            "className": ".pizza",
            "data": [
              {
                "x": "Pepperoni",
                "y": 8.0
              },
              {
                "x": "Cheese",
                "y": 8.5
              }
            ]
          }
        ]
      };
      var myChart = new xChart('bar', data, '#myChart');
      var data = {
        "xScale": "linear",
        "yScale": "linear",
        "type": "line-dotted",
        "main": [
          {
            "className": ".pizza",
            "data": [
              {
                "x": 4.5,
                "y": 0
              },
              {
                "x": 4.0,
                "y": 0
              },
              {
                "x": 1.65,
                "y": 0
              },
              {
                "x": 4.9,
                "y": 0
              },
              {
                "x": 5.0,
                "y": 0
              },
              {
                "x": 7.9,
                "y": 0
              }
            ]
          }
        ]
      };
      // var opts = {
      //   "dataFormatX": function (x) { return d3.time.format('%Y-%m-%d').parse(x); },
      //   "tickFormatX": function (x) { return d3.time.format('%A')(x); }
      // };
      // var myChart2 = new xChart('line-dotted', data, '#example3', opts);
      var myChart2 = new xChart('line-dotted', data, '#example3');




      var scatterPlot = {
        enter: function (self, storage, className, data, callbacks) {
          var insertionPoint = xChart.visutils.getInsertionPoint(9),
            container,
            // Map each error bar into 3 points, so it's easier to draw as a single path
            // Converts each point to a triplet with y from (y - e) to (y + e)
            // It would be better to use the `preUpdateScale` method here,
            // but for this quick example, we're taking a shortcut :)
            eData = data.map(function (d) {
              d.data = d.data.map(function (d) {
                return [{x: d.x, y: d.y - d.e}, {x: d.x, y: d.y}, {x: d.x, y: d.y + d.e}];
              });
              return d;
            }),
            paths;

          // It's always a good idea to create containers for sets
          container = self._g.selectAll('.errorLine' + className)
            .data(eData, function (d) {
              return d.className;
            });

          // The insertionPoint is a special method that helps us insert this
          // vis at a particular z-index
          // In this case, we've chosen the highest point (above everything else)
          container.enter().insert('g', insertionPoint)
            .attr('class', function (d, i) {
              return 'errorLine' + className.replace(/\./g, ' ') +
                ' color' + i;
            });

          // Tell each path about its data
          // and ensure we reuse any previously drawn item
          paths = container.selectAll('path')
            .data(function (d) {
              return d.data;
            }, function (d) {
              return d[0].x;
            });

          paths.enter().insert('path')
            .style('opacity', 0)
            .attr('d', d3.svg.line()
              .x(function (d) {
                // We offset by half the rangeBand, because this is a bar chart
                return self.xScale(d.x) + self.xScale.rangeBand() / 2;
              })
              .y(function (d) { return self.yScale(d.y); })
            );

          storage.containers = container;
          storage.paths = paths;
        },
        update: function (self, storage, timing) {
          // This is mostly duplication to the d3.svg.line from the enter() method
          storage.paths.transition().duration(timing)
            .style('opacity', 1)
            .attr('d', d3.svg.line()
              .x(function (d) {
                return self.xScale(d.x) + self.xScale.rangeBand() / 2;
              })
              .y(function (d) { return self.yScale(d.y); })
            );
        },
        exit: function (self, storage, timing) {
          storage.paths.exit()
            .transition().duration(timing)
            .style('opacity', 0);
        },
        destroy: function (self, storage, timing) {
          storage.paths.transition().duration(timing)
            .style('opacity', 0)
            .remove();
        }
      };









      var w = 500;
      var h = 200;

      var dataset = [
                  [ 5,     20 ],
                  [ 480,   90 ],
                  [ 250,   50 ],
                  [ 100,   33 ],
                  [ 330,   95 ],
                  [ 410,   12 ],
                  [ 475,   44 ],
                  [ 25,    67 ],
                  [ 85,    21 ],
                  [ 220,   88 ]
              ];
      var dataset2 = [
                  [ 101,  100, 15 ]
              ];



      //Create SVG element
      var svg = d3.select("body")
                  .append("svg")
                  .attr("width", w)
                  .attr("height", h);
      circles = svg.selectAll("circle")
         .data(dataset)
         .enter()
         .append("circle")
         .attr("cx", function(d) {
              return d[0];
         })
         .attr("cy", function(d) {
              return d[1];
         })
         .attr("r", function(d) {
            if (d.length > 2 ){
              return d[2];
            }
            return 5;
         });
      svg.append("circle")
        .data(dataset2)
        .attr("cx", function(d) {
              return d[0];
         })
         .attr("cy", function(d) {
              return d[1];
         })
         .attr("r", function(d) {
            if (d.length > 2 ){
              return d[2];
            }
            return 5;
         });



    }); // end doc ready
</script>
  </head>
  <body>
    <div id="chart">
      <figure style="width: 400px; height: 300px;" id="myChart"></figure>
      <figure style="width: 400px; height: 300px;" id="example3"></figure>

    </div>
  </body>
</html>